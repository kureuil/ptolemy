<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ptolemy</title>
  <link rel="stylesheet" href="<%= Routes.static_path(@conn, "/css/app.css") %>"/>
</head>
<body class="h-full bg-neutral-100">
  <div class="container mx-auto">
    <a class="lg:hidden block px-4 py-2 bg-primary-500 text-white font-bold" href="#app-shell-navigation">â˜°&nbsp;<%= gettext "Menu" %></a>
    <form class="mb-4 pt-4 flex flex-row" id="app-shell-search-container" action="<%= Routes.search_path(@conn, :index) %>" method="GET">
        <label for="app-shell-search-input" class="flex-1 pr-2 lg:px-0"><%= gettext "Search" %></label>
        <div class="flex-1 pl-2 lg:p-0">
          <input type="search" class="w-full shadow-inner rounded py-1 px-2 bg-neutral-white border border-neutral-200 focus:border-secondary-500" id="app-shell-search-input" name="q" value="<%= @conn.params["q"] %>">
        </div>
    </form>
    <div class="flex flex-col-reverse lg:flex-row">
      <nav class="flex-initial min-h-screen lg:w-64 lg:min-h-0" id="app-shell-navigation">
        <div class="pt-4 lg:pr-4 lg:pt-0">
          <%= link gettext("Submit link"), to: Routes.link_path(@conn, :new), class: "block w-full bg-secondary-300 text-secondary-900 font-bold rounded shadow text-center p-2 mb-2" %>
          <p class="text-sm uppercase font-bold text-neutral-900 mt-4"><%= gettext "Channels" %></p>
          <%= active_link @conn, gettext("Create channel"), to: Routes.channel_path(@conn, :new), class: "block font-semibold text-sm rounded p-1 text-neutral-800 hover:text-primary-800 hover:bg-neutral-200", class_active: "text-primary-900 underline" %>
          <%= for channel <- user_channels(@conn.assigns[:current_user]) do %>
            <%= active_link @conn, channel.name, to: Routes.channel_path(@conn, :show, channel), class: "block font-semibold text-sm rounded p-1 text-neutral-800 hover:text-primary-800 hover:bg-neutral-200", class_active: "text-primary-900 underline" %>
          <% end %>
          <p class="text-sm uppercase font-bold text-neutral-900 mt-4"><%= gettext "My account" %></p>
          <%= active_link @conn, "Invitations", to: Routes.invite_path(@conn, :index), class: "block font-semibold text-sm rounded p-1 text-neutral-800 hover:text-primary-800 hover:bg-neutral-200", class_active: "text-primary-900 underline" %>
          <%= form_for @conn, Routes.session_path(@conn, :delete), [class: "block w-full"], fn _f ->  %>
            <%= submit gettext("Log out"), class: "block w-full text-left font-semibold text-sm rounded p-1 text-neutral-800 hover:text-red-500 hover:bg-neutral-200" %>
          <% end %>
        </div>
      </nav>
      <main role="main" class="flex-1">
        <div class="bg-primary-200 text-primary-900 font-semibold py-2 px-4 mb-4 border-l-4 border-primary-800 empty:hidden" role="alert"><%= get_flash(@conn, :info) %></div>
        <div class="bg-red-100 text-red-700 font-semibold py-2 px-4 mb-4 border-l-4 border-red-700 empty:hidden" role="alert"><%= get_flash(@conn, :error) %></div>
        <%= render @view_module, @view_template, assigns %>
      </main>
    </div>
  </div>
  <script type="text/javascript" src="<%= Routes.static_path(@conn, "/js/app.js") %>"></script>
</body>
</html>
